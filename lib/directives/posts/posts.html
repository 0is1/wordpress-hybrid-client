<div masonry options='{{masonryOptions}}' bind-resize="isOn" list="posts">
    <div masonry-tile class="list card card-posts" ng-repeat="post in posts track by post.ID">
        <div ui-sref="public.post(::{ id: post.ID })">
            <div class="item item-image" ng-if="::post.featured_image.is_image" ng-style="::{'background-image': 'url({{post.featured_image.attachment_meta.sizes.medium.url}})'}">
                <div class="img-border"></div>
                <h1 class="item-title" ng-bind-html="::post.title"></h1>
                <!-- <img ng-src="{{post.featured_image.attachment_meta.sizes.medium.url}}"> -->
            </div>
            <div class="item item-text-wrap" ng-if="::!post.featured_image.is_image">
                <h1 class="item-title" ng-bind-html="::post.title"></h1>
            </div>
            <div class="item item-author" ng-class="::{'item-avatar' : post.author.avatar}">
                <img src="{{::post.author.avatar}}" ng-if="::post.author.avatar">
                <h2>{{post.author.name}}</h2>
                {{post.date | date : format : timezone}}
            </div>
            <div class="item item-text-wrap" ng-if="::post.excerpt" ng-bind-html="::post.excerpt"></div>
        </div>
        <div class="item item-divider item-footer" ng-if="::(post.terms.category.length || post.terms.post_tag.length)">
            <button class="button button-clear" ng-if="::post.terms.category.length" ng-click="showTaxonomies( 'categories.title', post.terms.category, 'category') ">
                <i class="icon ion-folder"></i>
            </button>
            <button class="button button-clear" ng-if="::post.terms.post_tag.length" ng-click="showTaxonomies( 'tags.title', post.terms.post_tag, 'post_tag') ">
                <i class="icon ion-pricetags"></i>
            </button>
        </div>
    </div>
</div>